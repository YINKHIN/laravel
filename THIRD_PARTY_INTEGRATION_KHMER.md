# ការរួមបញ្ចូលជាមួយភាគីទីបី

## ទិដ្ឋភាពទូទៅ
ចំណុចប្រទាក់ថ្មីសម្រាប់ការរួមបញ្ចូលជាមួយភាគីទីបី ផ្តល់នូវទិន្នន័យជាក់ស្តែង និងរបាយការណ៍ដែលអាចប្រើបានដោយផ្ទាល់សម្រាប់ប្រព័ន្ធភាគីទីបី។

## ចំណុចប្រទាក់ថ្មី

### 1. ការទាញយកកម្រិតស្តុក
```
GET /api/integrations/inventory-levels
```
ទាញយកកម្រិតស្តុកជាក់ស្តែងសម្រាប់ផលិតផលទាំងអស់ ដោយមានជម្រើសតម្រង:
- តម្រងតាមប្រភេទ
- តម្រងសម្រាប់ធាតុស្តុកទាប
- តម្រងសម្រាប់ផលិតផលដែលផុតកំណត់
- តម្រងសម្រាប់ផលិតផលដែលជិតផុតកំណត់

### 2. ប្រវត្តិចលនផលិតផល
```
GET /api/integrations/product-movement-history
```
ទាញយកប្រវត្តិនាំចូល និងលក់សម្រាប់ផលិតផលជាក់លាក់។
ប៉ារ៉ាម៉ែត្រ:
- `product_id` (ត្រូវការ): លេខសម្គាល់ផលិតផល

### 3. សកម្មភាពអ្នកផ្គត់ផ្គង់
```
GET /api/integrations/supplier-performance
```
ទាញយកម៉េត្រិកសកម្មភាពសម្រាប់អ្នកផ្គត់ផ្គង់ទាំងអស់។
ប៉ារ៉ាម៉ែត្រ:
- `date_from` (ជាជម្រើស): កាលបរិច្ឆេទចាប់ផ្តើម
- `date_to` (ជាជម្រើស): កាលបរិច្ឆេទបញ្ចប់

### 4. ប្រវត្តិការទិញរបស់អតិថិជន
```
GET /api/integrations/customer-purchase-history
```
ទាញយកប្រវត្តិការទិញសម្រាប់អតិថិជនជាក់លាក់។
ប៉ារ៉ាម៉ែត្រ:
- `customer_id` (ត្រូវការ): លេខសម្គាល់អតិថិជន

### 5. ទិន្នន័យលក់ដោយផ្ទាល់
```
GET /api/integrations/real-time-sales
```
ទាញយកទិន្នន័យលក់ដោយផ្ទាល់ ដោយមានជម្រើសតម្រង:
- `period`: daily, weekly, monthly, yearly

### 6. ផលិតផលណែនាំ
```
GET /api/integrations/product-recommendations
```
ទាញយកផលិតផលណែនាំដោយផ្ទាល់ ដោយផ្ដោតសំខាន់ទៅលើការលក់កន្លងមក។
ប៉ារ៉ាម៉ែត្រ:
- `limit` (ជាជម្រើស): ចំនួនផលិតផលដែលត្រូវត្រឡប់
- `period` (ជាជម្រើស): daily, weekly, monthly, yearly

### 7. ចំណុចប្រទាក់វេបហូក
```
POST /api/integrations/webhook
```
ចំណុចប្រទាក់សម្រាប់ប្រព័ន្ធភាគីទីបីដើម្បីផ្ញើទិន្នន័យ:
- `event_type`: ប្រភេទព្រឹត្តិការណ៍ (product_created, order_created, stock_updated)
- `payload`: ទិន្នន័យព្រឹត្តិការណ៍

## វិធីសាស្ត្រប្រើប្រាស់

### 1. ការផ្ទៀងផ្ទាត់ភាពត្រឹមត្រូវ
គ្រប់ចំណុចប្រទាក់ទាំងអស់ទាមទារថូខឹនផ្ទៀងផ្ទាត់ភាពត្រឹមត្រូវ។ ប្រើប្រាស់ចំណុចប្រទាក់ /api/auth/login ដើម្បីទទួលបានថូខឹន។

### 2. ការធ្វើសំណើរ
ប្រើប្រាស់ប្រភេទទិន្នន័យ application/json សម្រាប់សំណើរ POST និង PUT។

### 3. ការដោះស្រាយកំហុស
ការឆ្លើយតបនៃកំហុសមានទម្រង់ដូចខាងក្រោម:
```json
{
  "success": false,
  "message": "សារកំហុស"
}
```

## ឧទាហរណ៍ការប្រើប្រាស់

### 1. ទាញយកកម្រិតស្តុកសម្រាប់ផលិតផលទាំងអស់
```bash
curl -H "Authorization: Bearer YOUR_TOKEN" \
     http://localhost:8000/api/integrations/inventory-levels
```

### 2. ទាញយកប្រវត្តិចលនសម្រាប់ផលិតផលជាក់លាក់
```bash
curl -H "Authorization: Bearer YOUR_TOKEN" \
     "http://localhost:8000/api/integrations/product-movement-history?product_id=1"
```

### 3. ទាញយកសកម្មភាពអ្នកផ្គត់ផ្គង់សម្រាប់ខែកន្លងមក
```bash
curl -H "Authorization: Bearer YOUR_TOKEN" \
     "http://localhost:8000/api/integrations/supplier-performance?period=monthly"
```

### 4. ផ្ញើវេបហូកសម្រាប់ការបង្កើតផលិតផលថ្មី
```bash
curl -H "Authorization: Bearer YOUR_TOKEN" \
     -H "Content-Type: application/json" \
     -X POST \
     -d '{"event_type":"product_created","payload":{"product_id":123,"name":"New Product"}}' \
     http://localhost:8000/api/integrations/webhook
```

## សុវត្ថិភាព

### 1. ការផ្ទៀងផ្ទាត់ភាពត្រឹមត្រូវ
គ្រប់សំណើរទាមទារថូខឹនផ្ទៀងផ្ទាត់ភាពត្រឹមត្រូវ។ ថូខឹនត្រូវបានចេញដោយប្រើប្រាស់ /api/auth/login។

### 2. ការកំណត់ដែនកំណត់
API មានការកំណត់ដែនកំណត់ 60 សំណើរក្នុងមួយនាទីសម្រាប់អ្នកប្រើប្រាស់ដែលបានផ្ទៀងផ្ទាត់ភាពត្រឹមត្រូវ។

### 3. ការអ៊ិនគ្រីប
ប្រើប្រាស់ HTTPS សម្រាប់ការតភ្ជាប់ដើម្បីធានាបាននូវសុវត្ថិភាពនៃទិន្នន័យ។

## ការគាំទ្រ

សម្រាប់ការគាំទ្រ សូមទាក់ទងអ្នកគ្រប់គ្រងប្រព័ន្ធ ឬយោងទៅឯកសារ API សម្បូរណ៍។